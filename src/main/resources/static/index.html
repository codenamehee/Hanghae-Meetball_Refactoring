<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>야구메이트 - 백엔드 API확인용 테스트페이지</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css"/>
    <!--    <link rel="stylesheet"  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">-->
    <!--    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
  ///////////////////////////////////////////////////////////////////////////////////////////////////////
        let mytest = ""
        function getpost() {
            let postid = $('#asdasd').val()
            $.ajax({
                type: 'GET',
                url: `/api/post/${postid}`,
                success: function (response) {
                    let imgpath = response.filePath
                    let title = response.title
                    let content = response.content
                    console.log(response)
                    console.log(imgpath)
                    getonepost(imgpath,title,content);
                }
            })
        }

        function getonepost(imgpath,title,content) {
            // link, image, title, lprice, myprice 변수 활용하기
            $('#mycard').empty();
            let tempimsi = `<img class="card-img-top" src="/display/${imgpath}" alt="Card image cap">
                        <div class="card-body">
                            <h5 class="card-title">${title}</h5>
                            <p class="card-text">${content}</p>
                        </div>`
            console.log(tempimsi)
            $('#mycard').append(tempimsi);

        }
        function showPosts()
        {
            $('#post-box').empty();
            $.ajax({
                type: 'GET',
                url: '/api/post',
                success: function (response) {
                    for (let i = 0; i < response.length; i++) {
                        let post = response[i];
                        let temphtml = gethtml(post);
                        console.log(temphtml);
                        $('#post-box').append(temphtml);
                    }
                }
            })
        }
///////////////////////////////////////////////////////////////////////////////////////////////////
        function showTimelines()
        {
            $('#timeline-box').empty();
            $.ajax({
                type: 'GET',
                url: '/page/timeLine',
                success: function (response) {
                    for (let i = 0; i < response.length; i++) {
                        let post = response[i];
                        let temphtml = gettimelinehtml(post);
                        $('#timeline-box').append(temphtml);
                    }
                }
            })
        }
        function showGroup()
        {
            $('#group-box').empty();
            $.ajax({
                type: 'GET',
                url: '/page/group',
                success: function (response) {
                    response = response.allGroup
                    for (let i = 0; i < response.length; i++) {
                        let post = response[i];
                        let comment = response[i].groupCommentList;
                        let temphtml = getgrouphtml(post,comment);
                        $('#group-box').append(temphtml);
                        }
                    }
                })
            }

        function showGoods()
        {
            $('#goods-box').empty();
            $.ajax({
                type: 'GET',
                url: '/page/goods',
                success: function (response) {
                    for (let i = 0; i < response.length; i++) {
                        let post = response[i];
                        let temphtml = getgoodshtml(post);
                        $('#goods-box').append(temphtml);
                    }
                }
            })
        }

        function timelinedolikeorun(id,state)
        {
            console.log(id)
            $.ajax({
                type: 'POST',
                url: `/page/timeLine/${id}/like`,
                contentType: "application/json",
                data: JSON.stringify({"isLiked" : state}),
                success: function (response) {

                }
            })
        }
        function groupdolikeorun(id,state)
        {
            console.log(id)
            $.ajax({
                type: 'POST',
                url: `/page/group/${id}/like`,
                contentType: "application/json",
                data: JSON.stringify({"isLiked" : state}),
                success: function (response) {

                }
            })
        }
        function goodslinedolikeorun(id,state)
        {
            console.log(id)
            $.ajax({
                type: 'POST',
                url: `/page/goods/${id}/like`,
                contentType: "application/json",
                data: JSON.stringify({"isLiked" : state}),
                success: function (response) {

                }
            })
        }
        function gettimelinehtml(post) {
            // link, image, title, lprice, myprice 변수 활용하기
            return `<tr>
                <td>${post.id}</td>
                <td>${post.userName}</td>
                <td>${post.content}</td>
                <td>${post.dayBefore}</td>
                <td>${post.likecount}</td>
                <td onclick = "timelinedolikeorun(${post.id},'false')">좋아요</td>
                <td onclick = "timelinedolikeorun(${post.id},'true')">싫어요</td>
            </tr>`
        }
        function getgrouphtml(post) {
            // link, image, title, lprice, myprice 변수 활용하기
            return `<tr>
                <td>${post.groupId}</td>
                <td>${post.createdUsername}</td>
                <td>${post.title}</td>
                <td>${post.content}</td>
                <td>${post.peopleLimit}</td>
                <td>${post.stadium}</td>
                <td>${post.groupDate}</td>
                <td>${post.groupCommentList}</td>
                <td onclick = "groupdolikeorun(${post.groupId},'false')">좋아요</td>
                <td onclick = "groupdolikeorun(${post.groupId},'true')">싫어요</td>
            </tr>`
        }
        function getgrouphtmlcomment(post,comment) {
      // link, image, title, lprice, myprice 변수 활용하기
      return `<tr>
                <td>${post.groupId}</td>
                <td>${post.createdUsername}</td>
                <td>${post.title}</td>
                <td>${post.content}</td>
                <td>${post.peopleLimit}</td>
                <td>${post.stadium}</td>
                <td>${post.groupDate}</td>
                <td>댓글ID: ${comment.groupCommentId}<br>작성자: ${comment.commentUsername}<br>내용: ${comment.comment}<br>작성자PK: ${comment.commentUserId}</td>
                <td onclick = "groupdolikeorun(${post.groupId},'false')">좋아요</td>
                <td onclick = "groupdolikeorun(${post.groupId},'true')">싫어요</td>
            </tr>`
    }
        function getgoodshtml(post) {
            // link, image, title, lprice, myprice 변수 활용하기
            return `<tr>
                <td>${post.id}</td>
                <td>${post.userName}</td>
                <td>${post.goodsName}</td>
                <td>${post.dayBefore}</td>
                <td>${post.goodsPrice}</td>
                <td>${post.goodsImg}</td>
                <td onclick = "goodslinedolikeorun(${post.id},'false')">좋아요</td>
                <td onclick = "goodslinedolikeorun(${post.id},'true')">싫어요</td>
            </tr>`
        }

        function signup()
        {
            let a = $('#signupid').val()
            let b = $('#signupname').val()
            let c = $('#signuppw').val()
            $.ajax({
                type: 'POST',
                url: `/user/signup`,
                contentType: "application/json",
                data: JSON.stringify({"userid" : a, "username":b,"password":c}),
                success: function (response) {
                    console.log("회원가입에 성공")
                    console.log(response)
                }
            })
        }
        function login()
        {
            let a = $('#loginid').val()
            let c = $('#loginpw').val()
            $.ajax({
                type: 'POST',
                url: `/user/login`,
                contentType: "application/json",
                data: JSON.stringify({"userid" : a,"password":c}),
                success: function (response) {
                    console.log("로그인에 성공")
                    console.log(response)
                }
            })
        }
    </script>
</head>
<body>

<form id=signupform>
    <div class="login-id-label">아이디</div>
    <input id=signupid type="text" name="userid" class="login-input-box">
    <div class="login-id-label">닉네임</div>
    <input id=signupname type="text" name="username" class="login-input-box">
    <div class="login-id-label">비밀번호</div>
    <input id=signuppw type="password" name="password" class="login-input-box">
    <button onclick="signup()">회원가입</button>
</form>
<h>※회원가입을 테스트하실 수 있습니다.※</h>
<h>==============================</h>
<form>
    <div class="login-id-label">아이디</div>
    <input id=loginid type="text" name="userid" class="login-input-box">

    <div class="login-id-label">비밀번호</div>
    <input id=loginpw type="password" name="password" class="login-input-box">

    <button onclick="login()">로그인</button>
</form>
<h>※로그인을 테스트하고 토큰값을 가져올 수 있습니다.※</h>
<h>==============================</h>

<h>★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★</h>
<br>
<h><strong>백엔드만 DB쌓기 버튼 누르세요!!</strong></h>
<br>
<h><strong>막 누르면 DB꼬일 위험이 있습니다!</strong></h>
<br>
<h><strong>H2사용시나 DB밀어버렸을때만 사용합니다</strong></h>
<form action="/dbSet1" method="get">
    <button >유저데이터만들기,KBO데이터쌓기</button>
</form>
<form action="/dbSet2" method="get">
    <button >모임,타임라인,굿즈데이터베이스 저장</button>
</form>
<h><strong>모임,굿즈생성후 댓글DB저장해주세요</strong></h>
<form action="/dbSet3" method="get">
    <button >댓글만 DB저장</button>
</form>
<h><strong>모든 데이터를 순차적으로 한번에 넣으시려면</strong></h>
<form action="/dbSet4" method="get">
    <button >한번에 DB쌓기</button>
</form>
<h>★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★</h>
<br>
<button onclick = "showTimelines()">타임라인 불러오기</button>
<button onclick = "showGroup()">모임 불러오기</button>
<button onclick = "showGoods()">굿즈 불러오기</button>
<button onclick = "showTimelines(); showGroup(); showGoods();">전체 불러오기</button>
<h>★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★</h>
<br>

<h>===============================================================================</h>
<br>
<h>※/page/timeLine 결과입니다.※</h>
<table class="table">
    <thead>
    <tr>
        <th scope="col">탐라ID</th>
        <th scope="col">작성자명</th>
        <th scope="col">내용</th>
        <th scope="col">작성일자</th>
        <th scope="col">좋아요 개수</th>
        <th scope="col">좋아요!!!</th>
        <th scope="col">좋아요취소</th>
    </tr>
    </thead>
    <tbody id="timeline-box">
    </tbody>
</table>
<h>===============================================================================</h>
<br>
<h>※/page/group 결과입니다.※</h>
<table class="table">
    <thead>
    <tr>
        <th scope="col">모임ID</th>
        <th scope="col">작성자명</th>
        <th scope="col">제목</th>
        <th scope="col">내용</th>
        <th scope="col">최대인원</th>
        <th scope="col">구장이름</th>
        <th scope="col">모임날짜</th>
        <th scope="col">그룹댓글</th>
        <th scope="col">좋아요(구현예정)</th>
        <th scope="col">싫어요(구현예정)</th>
    </tr>
    </thead>
    <tbody id="group-box">
    </tbody>
</table>
<h>===============================================================================</h>
<br>
<h>※/page/goods 결과입니다.※</h>
<table class="table">
    <thead>
    <tr>
        <th scope="col">굿즈ID</th>
        <th scope="col">작성자명</th>
        <th scope="col">굿즈제목</th>
        <th scope="col">작성일자</th>
        <th scope="col">가격</th>
        <th scope="col">굿즈이미지</th>
        <th scope="col">좋아요</th>
        <th scope="col">싫어요</th>
    </tr>
    </thead>
    <tbody id="goods-box">
    </tbody>
</table>
<br>
<br>
<br>
<!--<form action="/api/post" method="post" enctype="multipart/form-data">-->
<!--    <div class="form-group row">-->
<!--        <label for="inputTitle" class="col-sm-2 col-form-label"><strong>제목</strong></label>-->
<!--        <div class="col-sm-10">-->
<!--            <input type="text" name="title" class="form-control" id="inputTitle">-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="form-group row">-->
<!--        <label for="inputAuthor" class="col-sm-2 col-form-label"><strong>작성자</strong></label>-->
<!--        <div class="col-sm-10">-->
<!--            <input type="text" name="userNick" class="form-control" id="inputAuthor">-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="form-group row">-->
<!--        <label for="inputContent" class="col-sm-2 col-form-label"><strong>내용</strong></label>-->
<!--        <div class="col-sm-10">-->
<!--            <textarea type="text" name="content" class="form-control" id="inputContent"></textarea>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="form-group row">-->
<!--        <label for="inputContent12" class="col-sm-2 col-form-label"><strong>카테고리0,1,2</strong></label>-->
<!--        <div class="col-sm-10">-->
<!--            <textarea type="text" name="categori" class="form-control" id="inputContent12"></textarea>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="form-group row">-->
<!--        <label for="inputFile" class="col-sm-2 col-form-label"><strong>첨부 파일</strong></label>-->
<!--        <div class="col-sm-10">-->
<!--            <div class="custom-file" id="inputFile">-->
<!--                <input name="file" type="file" class="custom-file-input" id="customFile">-->
<!--                <label class="custom-file-label" for="customFile">파일을 선택해 주세요.</label>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="row">-->
<!--        <div class="col-auto mr-auto"></div>-->
<!--        <div class="col-auto">-->
<!--            <input class="btn btn-primary" type="submit" role="button" value="글쓰기">-->
<!--        </div>-->
<!--    </div>-->
<!--</form>-->

<br>
<br>
<br>

<!--<textarea type="text" name="categori" class="form-control" id="asdasd"></textarea>-->
<!--<button  onclick="getpost()">postid입력하면 해당포스트불러옴</button>-->


<!--<br>-->
<!--<br>-->
<!--<br>-->
<!--<div class="card" style="width: 18rem;" id = "mycard">-->
<!--    <img class="card-img-top" src="/images/basic.jpg" alt="Card image cap">-->
<!--    <div class="card-body">-->
<!--        <h5 class="card-title">Card title</h5>-->
<!--        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>-->
<!--    </div>-->
<!--</div>-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</html>